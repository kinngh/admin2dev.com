<html lang="es-ES"><head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title>Curso Apex Starter | Admin2Dev</title>
  <meta name="HandheldFriendly" content="True">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link href="https://fonts.googleapis.com/css2?family=Source+Code+Pro:wght@500&amp;family=Spartan:wght@500;600;700&amp;display=swap" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=Muli:ital,wght@0,400;0,700;1,400;1,700&amp;display=swap" rel="stylesheet">
  <link rel="stylesheet" type="text/css" href="../assets/css/stylesheet.css">

  <link rel="shortcut icon" href="../favicon.ico" type="image/x-icon">

  <meta property="og:site_name" content="Admin2Dev">

  <meta property="og:title" content="sObject, DML and SOQL"> <!-- Content Title-->
  <meta property="og:description" content="Learn basics of using sObjects, Data Manipulation Language and SOQL in Salesforce"> <!-- Content Description -->
  <meta property="og:image" content="https://a2d-cdn.now.sh/web-image.png">
  <meta property="og:url" content="https://admin2dev.com/">


  <meta property="article:author" content="https://twitter.com/kinngh">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:title" content="sObject, DML and SOQL"> <!-- Twitter Title -->
  <meta name="twitter:description" content="Learn basics of using sObjects, Data Manipulation Language and SOQL in Salesforce"> <!-- Twitter description -->
  <meta name="twitter:url" content="https://admin2dev.com">
  <meta name="twitter:label1" content="Written by">
  <meta name="twitter:data1" content="Harshdeep Singh Hura">
  <meta name="twitter:label2" content="Filed under">
  <meta name="twitter:data2" content="Apex Tutorials">
  <meta name="twitter:site" content="@kinngh">
  <meta name="twitter:creator" content="@kinngh">
  <meta name="twitter:image" content="https://a2d-cdn.now.sh/web-image.png">
  <meta property="og:image:width" content="1200">
  <meta property="og:image:height" content="630">

<!-- Global site tag (gtag.js) - Google Analytics -->
<script async="" src="https://www.googletagmanager.com/gtag/js?id=UA-112097931-2"></script>
<script>
  window.dataLayer = window.dataLayer || [];

  function gtag() {
    dataLayer.push(arguments);
  }
  gtag('js', new Date());

  gtag('config', 'UA-112097931-2');
</script><script async="" src="https://hm-ackee.herokuapp.com/tracker.js" data-ackee-server="https://hm-ackee.herokuapp.com" data-ackee-domain-id="b76d74a9-da14-46a7-b30a-596c57329e5b"></script>

</head>

<body id="myBody" class="global-hash-post-card-amber global-hash-post-card-apricot global-hash-post-card-aqua global-hash-post-card-coral global-hash-post-card-cream global-hash-post-card-green global-hash-post-card-purple global-hash-post-card-raspberry global-hash-post-card-sky global-hash-dark-version is-loaded">
  <div class="global-wrap">
    <div class="global-content">
      <header class="header-section">
        <div class="header-wrap">
          <div class="header-logo">
            <a href="../index.html" class="is-image">
              <img src="../images/logo.png" alt="Admin2Dev">
            </a>
          </div>
          <div class="header-nav">
            <input id="toggle" class="header-checkbox" type="checkbox">
            <label class="header-toggle" for="toggle">
              <span>
                <span class="bar"></span>
                <span class="bar"></span>
                <span class="bar"></span>
              </span>
            </label>
            <nav>
              <ul>
                <li><a href="../index.html">Inicio</a></li>
                <li><a href="../learn/index.html">Aprender</a></li>
<li><a href="../tools/index.html">Herramientas</a></li>
                 <li><a href="../sponsor/index.html">Patrocinador</a></li>
                <li class="header-nav-dropdown">
                  <svg role="img" viewBox="0 0 20 4" xmlns="http://www.w3.org/2000/svg">
                    <path d="M2 4A2 2 0 102.001.001 2 2 0 002 4zm8 0a2 2 0 10.001-3.999A2 2 0 0010 4zm8 0a2 2 0 10.001-3.999A2 2 0 0018 4z"></path></svg>
                  <ul>
                    <li><a href="../about/index.html">Acerca de</a></li><li><a href="../terms.html">Condiciones del servicio</a></li>
                    <li><a href="../privacy.html">Política de privacidad</a></li>
                  </ul>
                </li>
              </ul>
              <ul>
                <li class="signup global-button"><a href="https://discord.gg/5ndr5F8" target="_blank">Únete a la comunidad</a></li>
                <li class="signin"><a onclick="darkMode()" id="darkModeText">Modo de luz</a></li>
              </ul>
            </nav>
          </div>
        </div>
      </header>
      <main class="global-main">
        <article class="post-section">
          <div class="post-header item is-hero is-page is-first post no-image page">
            <div class="item-container global-color">
              <div class="item-content">
                <h2 class="item-title">sObject, DML y SOQL</h2>
              </div>
            </div>
          </div>
          <div class="post-content">
            <h2>sObjects</h2>
            <p>Cada objeto estándar y personalizado en salesforce se puede declarar como un tipo de datos en Apex. La sintaxis es:</p>
            <pre><code>sObject variableName = new sObject();</code></pre>
            <p>Para rellenar los campos de cualquier objeto, introducimos setup &gt; object manager &gt; fields and relationships y <em>utilizamos el FieldName</em></p>
            <figure class="kg-card kg-image-card kg-card-hascaption"><img src="../images/apex/8/contact-api-name.png" width="100%"></figure>
            <p>Hagamos un nuevo contacto.</p>
            <pre><code>Contact con = new Contact();
con.firstName = 'John';
</code></pre>
            <p>Te darás cuenta de que no nos dejará hacer esto. Abramos la organización de San Francisco y hagamos un nuevo contacto y esto se debe a que el apellido es un campo obligatorio. Añadamos esos en el código.</p>
            <pre><code>Contact con = new Contact();
con.firstName = 'John';
con.lastName = 'Smith';
</code></pre>
            <p>Tenemos nuestras variables, pero aún no se han confirmado en la base de datos. Esto es el equivalente a crear un registro pero no presionar guardar. Para guardar esto en nuestra base de datos, necesitamos usar DML.</p>
            <h2>DML</h2>
            <p>DML significa <em>Data Manipulation Language</em>, un lenguaje de programación utilizado para insertar, eliminar o modificar datos en una base de datos. Por lo general, es parte de un lenguaje de programación más grande y el DML en sí se considera un lenguaje de subprogramación.</p>
            <ul>
              <li><code>Insert</code>Para insertar un valor.</li>
              <li><code>Update</code>Para actualizar un valor.</li>
              <li><code>Upsert</code>Para actualizar un valor y, si no existe, insértelo. (UPSERT = ACTUALIZACIÓN + INSERTO).</li>
              <li><code>Delete</code>Para eliminar un valor.</li>
              <li><code>Undelete</code>Para restaurar un valor de la papelera de reciclaje.</li>
            </ul>
            <p>Insertemos un registro:</p>
            <pre><code>Contact con = new Contact();
con.firstName = 'Ayye';
con.lastName = 'Last Name';

insert con;
</code></pre>
            <p>Volviendo a nuestra organización, ahora tenemos un nuevo contacto llamado <code>Ayye Last Name</code>.</p>
            <figure class="kg-card kg-image-card kg-card-hascaption"><img src="../images/apex/8/new-contact.png" width="100%"></figure>
            <p>When using custom objects or fields, a <code>__c</code> needs to be added at the end.</p>
            <pre><code>Invoice__c inv = new Invoice__c();
inv.lastName__c = 'Johnson';
insert inv;</code></pre>
            <p>Para agregar varias entradas, inicialice un objeto dentro del bucle for, actualice sus valores y añádales una lista externa.</p>

            <pre><code>List&lt;Contact&gt; finalList = new List&lt;Contact&gt;();

for(Integer i = 0; i &lt; 10; i ++){
    Contact con = new Contact();
    con.lastName = 'Test ' + i;
    finalList.add(con);
}

insert finalList;
</code></pre>
            <p>We initialize the Contact variable inside the for loop because the life of a variable when made inside a for loop starts when the loop starts and ends when the loop ends. So when you make a new <code>Contact con</code> inside the loop,
              it makes a new instance of <code>con</code> everytime the loop is run and destroys it at the end just after it adds to the list. This is similar to making 10 cups of coffee one at a time. You get your ground coffee and water at the
              start and once you mix it the “original” state of ground coffee and water doesn’t exist anymore and then you start over again, running a life cycle of raw ingredients to processed ingredients.</p>


            <h2>Lenguaje de consulta de objetos de Salesforce (SOQL)</h2>
            <p>SOQL o Salesforce Object Query Language en términos simples es un motor de búsqueda para su organización que recopila registros específicos o similares de objetos especificados. En términos de fabricación de café, está buscando un café específico a través de sus gabinetes en la cocina y poniéndolos en su mostrador. Echemos un vistazo a la sintaxis:</p>
            <pre><code>[SELECT field_name, field_name2 FROM object WHERE condition AND/OR condition];</code></pre>

            <ul>

              <li><code>[]</code>Es necesario colocar una instrucción SOQL entre corchetes</li>
              <li><code>SELECT</code>es la palabra clave que denota qué seleccionar</li>
              <li><code>field_name</code>es el nombre de la API / campo (no la etiqueta) del campo en el que queremos buscar</li>
              <li><code>FROM</code>es la palabra clave que denota dónde seleccionar</li>
              <li><code>object</code>es el nombre del objeto. Object__c si es un objeto personalizado.</li>
              <li><code>WHERE</code>es la palabra clave que indica qué condiciones buscar en el campo</li>
              <li><code>condition</code> is what are we looking for in the field(s), separated by <code>,</code> or an <code>AND</code> or <code>OR</code></li>

            </ul>

            <p>Digamos que quieres tomar un poco de café árabe del gabinete 1 y el café debe estar en forma de granos y debe ser fresco.</p>
            <pre><code>[SELECT arabica FROM Cabinet1 WHERE form = 'ground' AND status = 'fresh' ];</code></pre>


            <p>Ejecutemos una búsqueda real en los contactos realizados anteriormente:</p>
            <pre><code>[SELECT ID, lastName from contact WHERE lastName = 'Test 1'];</code></pre>


            <p>La consulta SOQL devuelve una lista de resultados y el tipo de datos es el objeto en el que buscó.</p>
            <pre><code>List&lt;Contact&gt; con = [SELECT ID, lastName FROM contact WHERE lastName = 'Test 1'];</code></pre>
            <p>Los escenarios de la vida real no son la prueba 1, 2 y 3, sino que toman nombres reales. Para buscar usando un formulario de plantilla, hacemos uso de comodines, estos son operadores que funcionan de manera similar para rellenar los espacios en blanco. Hay dos operadores comodines en SOQL:</p>
            <ul>
              <li><code>_</code>significa que estamos buscando un personaje específicamente.</li>
              <li><code>%</code>significa que estamos buscando varios personajes.</li>

            </ul>
            <p>To use wildcard operators, replace <code>=</code> with <code>LIKE</code> keyword. In coffee terms</p>
            <ul>
              <li><code>COFF%</code>devolvería COFFEE (búsqueda de múltiples caracteres)</li>
              <li><code>T_A</code>devolvería TEA (serach de un solo carácter)</li>
            </ul>

            <p>Busquemos los 10 contactos de prueba que hicimos anteriormente:</p>
            <pre><code>List&lt;Contact&gt; con = [SELECT ID, lastName FROM contact WHERE lastName LIKE 'Test%'];</code></pre>

            <p>This would return all values from <code>Test 0...Test 10</code>. But if we are looking to exclude Test 10 from our query, we would use:</p>
            <pre><code>List&lt;Contact&gt; con = [SELECT ID, lastName FROM contact WHERE lastName LIKE 'Test _'];</code></pre>

            <p>Esto volvería<code>Test 0...Test 9</code>
            </p><p>Podemos ejecutar aún más consultas complejas introduciendo operadores de comparación:</p>
            <pre><code>List&lt;Opportunity&gt; oppList = [SELECT ID, value FROM opportunity WHERE (value&lt;=100000 AND value &gt;= 50000)];</code></pre>

            <p>Esto devolvería todas las oportunidades con valores que oscilan entre 50.000 y 100.000. También podemos asignar apodos (llamados alias) a los objetos en las consultas SOQL:</p>
            <pre><code>[SELECT ID, lastName FROM contact c where c.lastName = 'Test'];</code></pre>

            <p>Esto es especialmente útil cuando se trata de nombres y campos de objetos personalizados más largos, y se trabaja con objetos y campos relacionados.</p>
            <p>We can further run more template serches by introducing variables in our SOQL queries just by adding a <code>:</code> before the variable name:</p>
            <pre><code>String searchName = 'Young';
List&lt;Contact&gt; con = [SELECT ID, lastName FROM contact WHERE lastName = :searchName];
</code></pre>

            <p>Por lo general, después de la palabra clave <code>SELECT</code>, incluimos ID en nuestras consultas, incluso si no usamos el campo. Esto se debe a que nuestras operaciones requieren esos campos y se maneja en segundo plano automáticamente y recomendaría casi siempre incluir ID como campo en sus consultas SOQL para su uso en el futuro o mientras trabaja en equipo.</p>
            <p>We can also limit the number of values returned by using the <code>LIMIT</code> keyword followed by an Integer.</p>
            <pre><code>[SELECT ID, LastName FROM Contact WHERE LastName = 'Test' LIMIT 10];</code></pre>
            <p>Esto devolverá los primeros 10 valores que encuentre.</p>
            <h1>Resumen</h1>
            <ul>
              <li>sObjects se puede utilizar como un tipo de datos para almacenar valores.</li>
              <li>Las sentencias DML se utilizan para manipular datos en la base de datos de la organización.</li>
              <li>SOQL es un motor de búsqueda de tipos que busca valores que coinciden con los criterios en los objetos especificados.</li>
            </ul>

            <a href="9.html" class="global-button">Día 9: Métodos de clase de base de datos</a>
          </div>
        </article>

      </main>
      <footer class="footer-section global-footer">
        <div class="footer-copyright">© <a href="http://harshdeephura.com" target="_blank">Harshdeep Singh Hura</a>.<br>Todos los derechos reservados.</div>
      </footer>
    </div>
  </div>




  <script src="../assets/js/global.js"></script>




</body></html>

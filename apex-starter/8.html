<html lang="fr-FR"><head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title>Cours de démarrage Apex | Admin2Dev</title>
  <meta name="HandheldFriendly" content="True">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link href="https://fonts.googleapis.com/css2?family=Source+Code+Pro:wght@500&amp;family=Spartan:wght@500;600;700&amp;display=swap" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=Muli:ital,wght@0,400;0,700;1,400;1,700&amp;display=swap" rel="stylesheet">
  <link rel="stylesheet" type="text/css" href="../assets/css/stylesheet.css">

  <link rel="shortcut icon" href="../favicon.ico" type="image/x-icon">

  <meta property="og:site_name" content="Admin2Dev">

  <meta property="og:title" content="sObject, DML and SOQL"> <!-- Content Title-->
  <meta property="og:description" content="Learn basics of using sObjects, Data Manipulation Language and SOQL in Salesforce"> <!-- Content Description -->
  <meta property="og:image" content="https://a2d-cdn.now.sh/web-image.png">
  <meta property="og:url" content="https://admin2dev.com/">


  <meta property="article:author" content="https://twitter.com/kinngh">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:title" content="sObject, DML and SOQL"> <!-- Twitter Title -->
  <meta name="twitter:description" content="Learn basics of using sObjects, Data Manipulation Language and SOQL in Salesforce"> <!-- Twitter description -->
  <meta name="twitter:url" content="https://admin2dev.com">
  <meta name="twitter:label1" content="Written by">
  <meta name="twitter:data1" content="Harshdeep Singh Hura">
  <meta name="twitter:label2" content="Filed under">
  <meta name="twitter:data2" content="Apex Tutorials">
  <meta name="twitter:site" content="@kinngh">
  <meta name="twitter:creator" content="@kinngh">
  <meta name="twitter:image" content="https://a2d-cdn.now.sh/web-image.png">
  <meta property="og:image:width" content="1200">
  <meta property="og:image:height" content="630">

<!-- Global site tag (gtag.js) - Google Analytics -->
<script async="" src="https://www.googletagmanager.com/gtag/js?id=UA-112097931-2"></script>
<script>
  window.dataLayer = window.dataLayer || [];

  function gtag() {
    dataLayer.push(arguments);
  }
  gtag('js', new Date());

  gtag('config', 'UA-112097931-2');
</script><script async="" src="https://hm-ackee.herokuapp.com/tracker.js" data-ackee-server="https://hm-ackee.herokuapp.com" data-ackee-domain-id="b76d74a9-da14-46a7-b30a-596c57329e5b"></script>

</head>

<body id="myBody" class="global-hash-post-card-amber global-hash-post-card-apricot global-hash-post-card-aqua global-hash-post-card-coral global-hash-post-card-cream global-hash-post-card-green global-hash-post-card-purple global-hash-post-card-raspberry global-hash-post-card-sky is-loaded">
  <div class="global-wrap">
    <div class="global-content">
      <header class="header-section">
        <div class="header-wrap">
          <div class="header-logo">
            <a href="../index.html" class="is-image">
              <img src="../images/logo.png" alt="Admin2Dev">
            </a>
          </div>
          <div class="header-nav">
            <input id="toggle" class="header-checkbox" type="checkbox">
            <label class="header-toggle" for="toggle">
              <span>
                <span class="bar"></span>
                <span class="bar"></span>
                <span class="bar"></span>
              </span>
            </label>
            <nav>
              <ul>
                <li><a href="../index.html">Accueil</a></li>
                <li><a href="../learn/index.html">Apprendre</a></li>
<li><a href="../tools/index.html">Outils</a></li>
                 <li><a href="../sponsor/index.html">Commanditaire</a></li>
                <li class="header-nav-dropdown">
                  <svg role="img" viewBox="0 0 20 4" xmlns="http://www.w3.org/2000/svg">
                    <path d="M2 4A2 2 0 102.001.001 2 2 0 002 4zm8 0a2 2 0 10.001-3.999A2 2 0 0010 4zm8 0a2 2 0 10.001-3.999A2 2 0 0018 4z"></path></svg>
                  <ul>
                    <li><a href="../about/index.html">À propos</a></li><li><a href="../terms.html">Conditions d'utilisation</a></li>
                    <li><a href="../privacy.html">Politique de confidentialité</a></li>
                  </ul>
                </li>
              </ul>
              <ul>
                <li class="signup global-button"><a href="https://discord.gg/5ndr5F8" target="_blank">Rejoignez la communauté</a></li>
                <li class="signin"><a onclick="darkMode()" id="darkModeText">Mode sombre</a></li>
              </ul>
            </nav>
          </div>
        </div>
      </header>
      <main class="global-main">
        <article class="post-section">
          <div class="post-header item is-hero is-page is-first post no-image page">
            <div class="item-container global-color">
              <div class="item-content">
                <h2 class="item-title">sObject, DML et SOQL</h2>
              </div>
            </div>
          </div>
          <div class="post-content">
            <h2>sObjects</h2>
            <p>Chaque objet standard et personnalisé dans salesforce peut être déclaré comme type de données dans Apex. La syntaxe est la suivante :</p>
            <pre><code>sObject variableName = new sObject();</code></pre>
            <p>Pour remplir les champs de n'importe quel sObject, nous entrons setup &gt; object manager &gt; fields and relationships et <em>utilisons le FieldName</em></p>
            <figure class="kg-card kg-image-card kg-card-hascaption"><img src="../images/apex/8/contact-api-name.png" width="100%"></figure>
            <p>Faisons un nouveau contact.</p>
            <pre><code>Contact con = new Contact();
con.firstName = 'John';
</code></pre>
            <p>Vous remarquerez qu'il ne nous laissera pas le faire. Ouvrons SF org et établissons un nouveau contact et c'est parce que le nom de famille est un champ obligatoire. Ajoutons-les dans le code.</p>
            <pre><code>Contact con = new Contact();
con.firstName = 'John';
con.lastName = 'Smith';
</code></pre>
            <p>Nous avons nos variables, mais elles ne sont pas encore validées dans la base de données. C'est l'équivalent de créer un enregistrement mais de ne pas appuyer sur Enregistrer. Pour enregistrer cela dans notre base de données, nous devons utiliser DML.</p>
            <h2>DML</h2>
            <p>DML signifie <em>Data Manipulation Language</em>, un langage de programmation utilisé pour insérer, supprimer ou modifier des données dans une base de données. Il fait généralement partie d'un langage de programmation plus grand et DML lui-même est considéré comme un langage de sous-programmation.</p>
            <ul>
              <li><code>Insert</code>Pour insérer une valeur.</li>
              <li><code>Update</code>Pour mettre à jour une valeur.</li>
              <li><code>Upsert</code>Pour mettre à jour une valeur et, si elle n'existe pas, insérez-la. (UPSERT = MISE À JOUR + INSCRIRE).</li>
              <li><code>Delete</code>Pour supprimer une valeur.</li>
              <li><code>Undelete</code>Pour restaurer une valeur à partir de la corbeille.</li>
            </ul>
            <p>Insérons un enregistrement :</p>
            <pre><code>Contact con = new Contact();
con.firstName = 'Ayye';
con.lastName = 'Last Name';

insert con;
</code></pre>
            <p>Pour en revenir à notre organisation, nous avons maintenant un nouveau contact nommé <code>Ayye Last Name</code>.</p>
            <figure class="kg-card kg-image-card kg-card-hascaption"><img src="../images/apex/8/new-contact.png" width="100%"></figure>
            <p>When using custom objects or fields, a <code>__c</code> needs to be added at the end.</p>
            <pre><code>Invoice__c inv = new Invoice__c();
inv.lastName__c = 'Johnson';
insert inv;</code></pre>
            <p>Pour ajouter plusieurs entrées, initialisez un objet à l'intérieur de la boucle for, mettez à jour ses valeurs et ajoutez-leur une liste externe.</p>

            <pre><code>List&lt;Contact&gt; finalList = new List&lt;Contact&gt;();

for(Integer i = 0; i &lt; 10; i ++){
    Contact con = new Contact();
    con.lastName = 'Test ' + i;
    finalList.add(con);
}

insert finalList;
</code></pre>
            <p>We initialize the Contact variable inside the for loop because the life of a variable when made inside a for loop starts when the loop starts and ends when the loop ends. So when you make a new <code>Contact con</code> inside the loop,
              it makes a new instance of <code>con</code> everytime the loop is run and destroys it at the end just after it adds to the list. This is similar to making 10 cups of coffee one at a time. You get your ground coffee and water at the
              start and once you mix it the “original” state of ground coffee and water doesn’t exist anymore and then you start over again, running a life cycle of raw ingredients to processed ingredients.</p>


            <h2>Salesforce Object Query Language (SOQL)</h2>
            <p>SOQL ou Salesforce Object Query Language en termes simples est un moteur de recherche pour votre organisation qui recueille des enregistrements spécifiques ou similaires à partir d'objets spécifiés. En termes de cafetière, c'est chercher un café spécifique dans vos armoires de la cuisine et les déposer sur votre comptoir. Jetons un coup d'œil à la syntaxe :</p>
            <pre><code>[SELECT field_name, field_name2 FROM object WHERE condition AND/OR condition];</code></pre>

            <ul>

              <li><code>[]</code>Il est nécessaire d'encoler une déclaration SOQL entre crochets</li>
              <li><code>SELECT</code>est le mot-clé qui indique ce qu'il faut sélectionner</li>
              <li><code>field_name</code>est le nom de l'API / champ (et non l'étiquette) du champ dans lequel nous voulons rechercher</li>
              <li><code>FROM</code>est le mot clé qui indique où choisir parmi</li>
              <li><code>object</code>est le nom de l'objet. Object__c s'il s'agit d'un objet personnalisé.</li>
              <li><code>WHERE</code>est le mot-clé qui indique les conditions à rechercher dans le champ</li>
              <li><code>condition</code> is what are we looking for in the field(s), separated by <code>,</code> or an <code>AND</code> or <code>OR</code></li>

            </ul>

            <p>Supposons que vous vouliez obtenir du café arabica de l'armoire 1 et que le café doit être sous forme de grains et doit être frais.</p>
            <pre><code>[SELECT arabica FROM Cabinet1 WHERE form = 'ground' AND status = 'fresh' ];</code></pre>


            <p>Faisons une recherche réelle sur les contacts établis précédemment :</p>
            <pre><code>[SELECT ID, lastName from contact WHERE lastName = 'Test 1'];</code></pre>


            <p>La requête SOQL renvoie une liste de résultats et le type de données est l'objet dans lequel elle a cherché.</p>
            <pre><code>List&lt;Contact&gt; con = [SELECT ID, lastName FROM contact WHERE lastName = 'Test 1'];</code></pre>
            <p>Les scénarios de la vie réelle ne sont pas les tests 1, 2 et 3, mais prennent des noms réels. Pour effectuer une recherche à l'aide d'un formulaire modèle, nous utilisons des caractères génériques, ce sont des opérateurs qui fonctionnent de manière similaire pour remplir les blancs. Il y a deux opérateurs génériques dans SOQL :</p>
            <ul>
              <li><code>_</code>signifie que nous recherchons un personnage spécifiquement.</li>
              <li><code>%</code>signifie que nous recherchons plusieurs caractères.</li>

            </ul>
            <p>To use wildcard operators, replace <code>=</code> with <code>LIKE</code> keyword. In coffee terms</p>
            <ul>
              <li><code>COFF%</code>retournerait CAFÉ (recherche multicaractère)</li>
              <li><code>T_A</code>retournerait TEA (Single character serach)</li>
            </ul>

            <p>Recherchons les 10 contacts Test que nous avons établis plus tôt :</p>
            <pre><code>List&lt;Contact&gt; con = [SELECT ID, lastName FROM contact WHERE lastName LIKE 'Test%'];</code></pre>

            <p>This would return all values from <code>Test 0...Test 10</code>. But if we are looking to exclude Test 10 from our query, we would use:</p>
            <pre><code>List&lt;Contact&gt; con = [SELECT ID, lastName FROM contact WHERE lastName LIKE 'Test _'];</code></pre>

            <p>Cela reviendrait<code>Test 0...Test 9</code>
            </p><p>Nous pouvons également exécuter des requêtes complexes en introduisant des opérateurs de comparaison :</p>
            <pre><code>List&lt;Opportunity&gt; oppList = [SELECT ID, value FROM opportunity WHERE (value&lt;=100000 AND value &gt;= 50000)];</code></pre>

            <p>Cela permettrait de renvoyer toutes les opportunités avec des valeurs allant de 50 000 à 100 000. Nous pouvons également attribuer des surnoms (appelés alias) aux objets dans les requêtes SOQL :</p>
            <pre><code>[SELECT ID, lastName FROM contact c where c.lastName = 'Test'];</code></pre>

            <p>C'est particulièrement pratique lorsque vous traitez de noms d'objets et de champs personnalisés plus longs et que vous travaillez avec des objets et des champs connexes.</p>
            <p>We can further run more template serches by introducing variables in our SOQL queries just by adding a <code>:</code> before the variable name:</p>
            <pre><code>String searchName = 'Young';
List&lt;Contact&gt; con = [SELECT ID, lastName FROM contact WHERE lastName = :searchName];
</code></pre>

            <p>Habituellement, après le mot-clé <code>SELECT</code>, nous incluons ID dans nos requêtes, même si nous n'utilisons pas le champ. C'est parce que nos opérations nécessitent ces champs et qu'ils sont gérés automatiquement en arrière-plan et je recommande presque toujours d'inclure ID comme champ dans vos requêtes SOQL pour une utilisation future ou en équipe.</p>
            <p>We can also limit the number of values returned by using the <code>LIMIT</code> keyword followed by an Integer.</p>
            <pre><code>[SELECT ID, LastName FROM Contact WHERE LastName = 'Test' LIMIT 10];</code></pre>
            <p>Cela retournera les 10 premières valeurs qu'il trouve.</p>
            <h1>Résumé</h1>
            <ul>
              <li>sObjects peut être utilisé comme type de données pour stocker des valeurs.</li>
              <li>Les instructions DML sont utilisées pour manipuler les données dans la base de données de l'organisation.</li>
              <li>SOQL est une sorte de moteur de recherche qui recherche des valeurs correspondant à des critères dans des objets spécifiés.</li>
            </ul>

            <a href="9.html" class="global-button">Jour 9 : Méthodes de classe de base de données</a>
          </div>
        </article>

      </main>
      <footer class="footer-section global-footer">
        <div class="footer-copyright">© <a href="http://harshdeephura.com" target="_blank">Harshdeep Singh Hura</a>.<br>Tous droits réservés.</div>
      </footer>
    </div>
  </div>




  <script src="../assets/js/global.js"></script>




</body></html>

<html lang="de-DE"><head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title>Apex-Startkurs | Admin2Dev</title>
  <meta name="HandheldFriendly" content="True">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link href="https://fonts.googleapis.com/css2?family=Source+Code+Pro:wght@500&amp;family=Spartan:wght@500;600;700&amp;display=swap" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=Muli:ital,wght@0,400;0,700;1,400;1,700&amp;display=swap" rel="stylesheet">
  <link rel="stylesheet" type="text/css" href="../assets/css/stylesheet.css">

  <link rel="shortcut icon" href="../favicon.ico" type="image/x-icon">

  <meta property="og:site_name" content="Admin2Dev">

  <meta property="og:title" content="Scheduled Apex Class"> <!-- Content Title-->
  <meta property="og:description" content="Learn the basics of scheduling an apex class to run at a later time and date"> <!-- Content Description -->
  <meta property="og:image" content="https://a2d-cdn.now.sh/web-image.png">
  <meta property="og:url" content="https://admin2dev.com/">


  <meta property="article:author" content="https://twitter.com/kinngh">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:title" content="Scheduled Apex Class"> <!-- Twitter Title -->
  <meta name="twitter:description" content="Learn the basics of scheduling an apex class to run at a later time and date"> <!-- Twitter description -->
  <meta name="twitter:url" content="https://admin2dev.com">
  <meta name="twitter:label1" content="Written by">
  <meta name="twitter:data1" content="Harshdeep Singh Hura">
  <meta name="twitter:label2" content="Filed under">
  <meta name="twitter:data2" content="Apex Tutorials">
  <meta name="twitter:site" content="@kinngh">
  <meta name="twitter:creator" content="@kinngh">
  <meta name="twitter:image" content="https://a2d-cdn.now.sh/web-image.png">
  <meta property="og:image:width" content="1200">
  <meta property="og:image:height" content="630">

<!-- Global site tag (gtag.js) - Google Analytics -->
<script async="" src="https://www.googletagmanager.com/gtag/js?id=UA-112097931-2"></script>
<script>
  window.dataLayer = window.dataLayer || [];

  function gtag() {
    dataLayer.push(arguments);
  }
  gtag('js', new Date());

  gtag('config', 'UA-112097931-2');
</script><script async="" src="https://hm-ackee.herokuapp.com/tracker.js" data-ackee-server="https://hm-ackee.herokuapp.com" data-ackee-domain-id="b76d74a9-da14-46a7-b30a-596c57329e5b"></script>

</head>

<body id="myBody" class="global-hash-post-card-amber global-hash-post-card-apricot global-hash-post-card-aqua global-hash-post-card-coral global-hash-post-card-cream global-hash-post-card-green global-hash-post-card-purple global-hash-post-card-raspberry global-hash-post-card-sky is-loaded">
  <div class="global-wrap">
    <div class="global-content">
      <header class="header-section">
        <div class="header-wrap">
          <div class="header-logo">
            <a href="../index.html" class="is-image">
              <img src="../images/logo.png" alt="Admin2Dev">
            </a>
          </div>
          <div class="header-nav">
            <input id="toggle" class="header-checkbox" type="checkbox">
            <label class="header-toggle" for="toggle">
              <span>
                <span class="bar"></span>
                <span class="bar"></span>
                <span class="bar"></span>
              </span>
            </label>
            <nav>
              <ul>
                <li><a href="../index.html">Startseite</a></li>
                <li><a href="../learn/index.html">Lernen</a></li>
<li><a href="../tools/index.html">Werkzeuge</a></li>
                 <li><a href="../sponsor/index.html">Sponsor</a></li>
                <li class="header-nav-dropdown">
                  <svg role="img" viewBox="0 0 20 4" xmlns="http://www.w3.org/2000/svg">
                    <path d="M2 4A2 2 0 102.001.001 2 2 0 002 4zm8 0a2 2 0 10.001-3.999A2 2 0 0010 4zm8 0a2 2 0 10.001-3.999A2 2 0 0018 4z"></path></svg>
                  <ul>
                    <li><a href="../about/index.html">About</a></li><li><a href="../terms.html">Terms Of Service</a></li>
                    <li><a href="../privacy.html">Privacy Policy</a></li>
                  </ul>
                </li>
              </ul>
              <ul>
                <li class="signup global-button"><a href="https://discord.gg/5ndr5F8" target="_blank">Treten Sie der Community bei</a></li>
                <li class="signin"><a onclick="darkMode()" id="darkModeText">Dunkler Modus</a></li>
              </ul>
            </nav>
          </div>
        </div>
      </header>
      <main class="global-main">
        <article class="post-section">
          <div class="post-header item is-hero is-page is-first post no-image page">
            <div class="item-container global-color">
              <div class="item-content">
                <h2 class="item-title">Geplante Apex-Klasse</h2>
              </div>
            </div>
          </div>
          <div class="post-content">
            <p>Die meisten von uns haben eine Morgenroutine, egal ob es darum geht, früh aufzuwachen und Frühstück für die ganze Familie zuzubereiten und zur Arbeit zu gehen oder 5 Minuten aufzuwachen, bevor Sie gehen und Kaffee zum Frühstück trinken und in Eile gehen sollen. Es gibt bestimmte Aktivitäten, die regelmäßig stattfinden müssen, und sogar bei der Arbeit, es könnte sein, eine E-Mail mit dem heutigen Update über Möglichkeiten oder monatliche Umsatzstatistiken oder Jahresberichte über die Leistung des Unternehmens zu senden. Um unseren Code zu automatisieren, verwenden wir <em>Scheduled Apex</em>.</p>
            <p>As the name suggests, Scheduled Apex runs a task at specific time frames as defined by the developer. A Scheduled Class implements <em>Schedulable</em> and has an <code>execute()</code> method. Let's take a look at the syntax:</p>
            <pre><code>global class SomeClass implements Schedulable {
                global void execute(SchedulableContext ctx) {
                    //Code Here
                }
            }</code></pre>
            <ul>
              <li>Eine Zeitplanklasse ist immer<code>global</code></li>
              <li>Die Klasse muss implementieren<code>Schedulable</code></li>
              <li>The Class must have an <code>execute()</code> method.</li>
              <li>The <code>SchedulableContext ctx</code> is just like the Batch Class' <code>Database.BatchableContext bc</code>, it is the jobID of the schedule class.</li>
            </ul>
            <p>Es empfiehlt sich, Ihre Batch-Klasse / Apex-Klasse aus Ihrer Zeitplanklasse aufzurufen, anstatt sie mit Code zu füllen. Rufen wir eine Batch-Klasse auf:</p>
            <pre><code>global class ClassSchedule implements Schedulable {
                global void execute(SchedulableContext ctx) {
                    //Code Here
                    BatchClass tester = new BatchClass();
                    Database.executeBatch(tester);
                }
            }</code></pre>
            <p>We made a new class called <code>ClassSchedule</code> that implements <code>Schedulable</code> and called our batch class from the <code>execute()</code> method. Nice and simple. Now let's schedule it.</p>
            <p>Bei der Planung der Klasse wird sie in der <em>Zeitzone des Benutzers ausgeführt, die sie ausführt</em>, und in den meisten Teilen ist dies die Zeitzone des Entwicklers.</p>
            <p>Um eine Klasse zu planen, erstellen wir zuerst eine neue Instanz.</p>
            <pre><code>ClassSchedule schClass = new ClassSchedule();</code></pre>
            <p>Now, we setup time using a very specific format.
              <code>Seconds Minutes Hours Day_Of_Month Month Day_Of_Week Optional_Year</code>.</p>
            <p>Hier ist das Markup für Werte:</p>
            <div class="responsive-table">
              <table>
                <thead>
                  <tr>
                    <th>Name</th>
                    <th>Werte</th>
                    <th>Spezial Zeichen</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td>Sekunden</td>
                    <td>0–59</td>
                    <td>Keine</td>
                  </tr>
                  <tr>
                    <td>Minuten</td>
                    <td>0–59</td>
                    <td>Keine</td>
                  </tr>
                  <tr>
                    <td>Stunden</td>
                    <td>0–23</td>
                    <td>Keine</td>
                  </tr>
                  <tr>
                    <td>Tag des Monats</td>
                    <td>1–31</td>
                    <td>, - *? / L W</td>
                  </tr>
                  <tr>
                    <td>Monat</td>
                    <td>1–12 oder die ersten drei Buchstaben der Monate (JAN - DEC)</td>
                    <td>, - * /</td>
                  </tr>
                  <tr>
                    <td>Wochentag</td>
                    <td>1–7 oder die ersten drei Buchstaben des Tages (SUN - SAT)</td>
                    <td>, - *? / L #</td>
                  </tr>
                  <tr>
                    <td>Optional_Jahr</td>
                    <td>Null oder 1970-2099</td>
                    <td>, - * /</td>
                  </tr>
                </tbody>
              </table>
            </div>
            <p>Aufschlüsselung von Sonderzeichen:</p>
            <div class="responsive-table">
              <table>
                <thead>
                  <tr>
                    <th>Sonderzeichen</th>
                    <th>Beschreibung</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td>,</td>
                    <td>Delimits values. For example, use <code>JAN, MAR, APR</code> to specify more than one month.</td>
                  </tr>
                  <tr>
                    <td>-</td>
                    <td>Gibt einen Bereich an. Verwenden Sie beispielsweise <code>JAN-MAR</code>, um mehr als einen Monat anzugeben.</td>
                  </tr>
                  <tr>
                    <td>*</td>
                    <td>Specifies all values. For example, if Month is specified as <code>*</code>, the job is scheduled for every month.</td>
                  </tr>
                  <tr>
                    <td>?</td>
                    <td>Specifies no specific value. This is only available for <code>Day_of_month</code>and <code>Day_of_week</code>, and is generally used when specifying a value for one and not the other.</td>
                  </tr>
                  <tr>
                    <td>/</td>
                    <td>Specifies increments. The number before the slash specifies when the intervals will begin, and the number after the slash is the interval amount. For example, if you specify <code>1/5</code> for Day_of_month, the Apex class
                      runs every fifth day of the month, starting on the first of the month.</td>
                  </tr>
                  <tr>
                    <td>L</td>
                    <td>Specifies the end of a range (last). This is only available for <code>Day_of_month</code> and <code>Day_of_week</code>. When used with Day of month, L always means the last day of the month, such as January 31, February 29 for
                      leap years, and so on. When used with Day_of_week by itself, it always means 7 or SAT. When used with a Day_of_week value, it means the last of that type of day in the month. For example, if you specify 2L, you are specifying
                      the last Monday of the month. Do not use a range of values with L as the results might be unexpected.</td>
                  </tr>
                  <tr>
                    <td>W</td>
                    <td>Specifies the nearest weekday (Monday-Friday) of the given day. This is only available for <code>Day_of_month</code>. For example, if you specify <code>20W</code>, and the 20th is a Saturday, the class runs on the 19th. If you
                      specify 1W, and the first is a Saturday, the class does not run in the previous month, but on the third, which is the following Monday. Use the L and W together to specify the last weekday of the month.</td>
                  </tr>
                  <tr>
                    <td>#</td>
                    <td>Gibt den n-ten Tag des Monats im Format weekday#day_of_month an. Dies ist nur für Day_of_week verfügbar. Die Zahl vor dem # gibt den Wochentag (SUN-SAT) an. Die Zahl nach dem # gibt den Tag des Monats an. Die Angabe von 2#2 bedeutet beispielsweise, dass die Klasse am zweiten Montag eines jeden Monats ausgeführt wird.</td>
                  </tr>
                </tbody>
              </table>
            </div>
            <p>Das Verständnis der Tabellen könnte ein wenig schwierig sein, also nehmen wir einige Beispiele:</p>
            <div class="responsive-table">
              <table>
                <thead>
                  <tr>
                    <th>Ausdruck</th>
                    <th>Beschreibung</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td><code>0 0 13 * * ?</code></td>
                    <td>Die Klasse findet jeden Tag um 13 Uhr statt.</td>
                  </tr>
                  <tr>
                    <td><code>0 0 22 ? * 6L</code></td>
                    <td>Die Klasse findet jeden letzten Freitag im Monat um 22 Uhr statt.</td>
                  </tr>
                  <tr>
                    <td><code>0 0 10 ? * MON-FRI</code></td>
                    <td>Der Unterricht findet von Montag bis Freitag um 10 Uhr statt.</td>
                  </tr>
                  <tr>
                    <td><code>0 0 20 * * ? 2010</code></td>
                    <td>Die Klasse findet im Laufe des Jahres 2010 jeden Tag um 20 Uhr statt.</td>
                  </tr>
                </tbody>
              </table>
            </div>
            <p>Ich schreibe dies um 3:52 Uhr und möchte meine Klasse so planen, dass sie jeden Tag um 4 Uhr morgens läuft.</p>
            <pre><code>String sch = '0 0 4 * * ?';</code></pre>
            <ul>
              <li>First two values denoting seconds and horus is <code>0</code> and the third value is <code>4</code> so that means the time is <code>04:00</code> or 4AM.</li>
              <li>The next two values are <code>*</code> denoting we want Day_of_the month and Month to be <em>all</em> values, so 1st through 31st, Jan to Dec.</li>
              <li>Der Day_of_week ist ein <code>?</code> Angibt, dass wir keinen Wert angeben möchten, <em>da wir bereits Werte für unseren day_of_month-Wert angegeben haben, so dass dies keinen Wert erfordert.</em></li>
              <li>Das Jahr wird weggelassen, weil es ein optionaler Wert ist.</li>
            </ul>
            <p>Das könnte einige Zeit dauern, bis ich es verstehe, und ich beziehe mich immer noch auf dieses Diagramm und verbringe eine solide Minute damit<em>, </em>zu schreiben<em>, wann </em>ich laufen soll, also machen Sie sich keine Sorgen, wenn Sie es nicht sofort bekommen. Jetzt, da wir <em>was </em>und <em>wann </em>laufen müssen, lassen Sie es uns tatsächlich ausführen. Dazu verwenden wir die Klassenmethode <code>System.schedule()</code>, die drei Parameter akzeptiert:</p>
            <ul>
              <li>Name (String) des Auftrags.</li>
              <li>Zeit (String), die als Cron-Zeit bezeichnet wird.</li>
              <li>Geplante Klasse (Variable).</li>
            </ul>
            <p>Genau wie bei unserer Batch Class-Ausführung speichern wir die ID in einer Variablen. Schreiben wir alles zusammen in einem Anon Exec-Fenster:</p>
            <pre><code>ClassSchedule classer = new ClassSchedule();
            String sch = '0 0 4 * * ?'; //run everyday at 4
            String jobId = system.schedule('classScheduler', sch, classer);
            System.debug(jobId);</code></pre>
            <p>Nachdem unser Code ausgeführt wurde, gehen Sie zu Setup und suchen Sie nach <em>geplanten Jobs</em>, und Sie werden feststellen, dass für die von Ihnen angegebene Zeit ein neuer Job geplant ist! (Ich lief meine um 3:55 Uhr, weil ich unruhig war.)</p>
            <figure class="kg-card kg-width-full kg-card-hascaption"><img src="../images/apex/20/1.png" width="100%" alt="Geplante Klasse im Setup">
            </figure>
            <p>Es gibt hier eine Löschoption, um den geplanten Job zu löschen. Es ist möglich, die Klasse aus dem Code neu zu planen, aber ich habe gesehen, wie erfahrene Entwickler den Auftrag löschen und einen neuen für die Klasse planen, damit Verwirrung vermieden wird. Jetzt, da wir wissen, wie man eine Zeitplanklasse schreibt, schreiben wir Testklasse dafür.</p>
            <h2>Testklasse</h2>
            <p>Persönlich fühlt sich das Schreiben einer Testklasse für die geplante Klasse wie eine Formalität an, nur weil die meisten geplanten Klassen, die ich im letzten Jahr geschrieben habe, eine Batch-Klasse genannt haben und diese Klassen bereits Tests geschrieben hatten, aber da wir immer eine 100%ige Codeabdeckung anstreben, müssen wir die geplante Klasse nur einmal anrufen. Ich habe auch gesehen, wie Entwickler die gleiche Praxis befolgen.</p>
            <p>For this, we need to define a <em>Time</em> string, but call the Scheduled class inside the <code>Test.startTest()</code> and <code>Test.stopTest()</code> because <em>this forces the scheduled class to run immediately on the test
                database</em> because we really don't want to wait for testing it.</p>
            <pre><code>@isTest
            public class ClassScheduleTest {
                public static String sch_test = '0 32 4 * * ?'; //define time

                static testmethod void testerMethod(){

                    Test.startTest();
                    ClassSchedule tester = new ClassSchedule();
                    String jobId = System.schedule('Test Class', sch_test, tester);
                    Test.stopTest();


                }
            }</code></pre>
            <p>Geplante Klassen haben bestimmte Einschränkungen, die wir besprechen werden, wenn wir HTTP-Aufrufe von Apex-Klassen in Betracht ziehen.</p>
            <h1>Zusammenfassung</h1>
            <ul>
              <li>Geplante Klassen werden in dem vom Entwickler festgelegten Zeitrahmen ausgeführt.</li>
              <li>Die Klasse läuft immer basierend auf der Zeitzone des Benutzers</li>
              <li>Das Schreiben von Testklassen für geplante Klassen ist meist redundant, und ein praktischer Ansatz besteht darin, eine Testklasse für die Klassen zu schreiben, die sie aufruft, und einen namensgebenden Test für die geplante Klasse, nur um eine 100%ige Codeabdeckung zu erreichen.</li>
            </ul>

            <a href="21.html" class="global-button">Tag 21: Netzwerk- und REST-API</a>
          </div>
        </article>

      </main>
      <footer class="footer-section global-footer">
        <div class="footer-copyright">© <a href="http://harshdeephura.com" target="_blank">Harshdeep Singh Hura</a>.<br>Alle Rechte vorbehalten.</div>
      </footer>
    </div>
  </div>




  <script src="../assets/js/global.js"></script>




</body></html>
